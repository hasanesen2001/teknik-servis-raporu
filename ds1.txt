<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teknik Servis Raporu Sistemi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .signature-box {
            border: 2px dashed #d1d5db;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .signature-box:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        .signature-filled {
            border: 2px solid #10b981;
            background-color: #f0fdf4;
            color: #059669;
        }
        .tab-button {
            transition: all 0.3s ease;
        }
        .tab-button.active {
            background-color: #3b82f6;
            color: white;
        }
        .page {
            display: none;
        }
        .page.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- Header -->
        <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
            <h1 class="text-3xl font-bold text-gray-800 text-center mb-2">Teknik Servis Raporu Sistemi</h1>
            <p class="text-gray-600 text-center">DÃ¶ner Servis Ã‡alÄ±ÅŸmasÄ± YÃ¶netimi</p>
        </div>

        <!-- Tab Navigation -->
        <div class="bg-white rounded-xl shadow-lg p-4 mb-6">
            <div class="flex flex-wrap gap-2">
                <button onclick="showPage('newReport')" class="tab-button active px-6 py-3 rounded-lg font-semibold transition-colors">ğŸ“ Yeni Rapor</button>
                <button onclick="showPage('reportList')" class="tab-button px-6 py-3 rounded-lg font-semibold transition-colors bg-gray-100 hover:bg-gray-200">ğŸ“‹ KayÄ±tlÄ± Raporlar</button>
            </div>
        </div>

        <!-- Yeni Rapor SayfasÄ± -->
        <div id="newReport" class="page active">
            <!-- Servis NumarasÄ± GÃ¶sterimi -->
            <div class="bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-xl shadow-lg p-6 mb-6">
                <div class="text-center">
                    <h2 class="text-xl font-semibold mb-2">Servis NumarasÄ±</h2>
                    <div class="text-3xl font-bold" id="currentServiceNumber">SRV-001</div>
                </div>
            </div>

            <form id="serviceForm" class="space-y-6">
                <!-- Tarih ve Saat Bilgileri -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">ğŸ“… Tarih ve Saat Bilgileri</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Tarih</label>
                            <input type="date" id="serviceDate" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ekip GidiÅŸ Saati</label>
                            <input type="time" id="departureTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ä°ÅŸletmeden Ã‡Ä±kÄ±ÅŸ Saati</label>
                            <input type="time" id="exitTime" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Orada Kalma SÃ¼resi (saat)</label>
                            <input type="number" id="stayDuration" step="0.5" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Gidilen Mesafe (km)</label>
                            <input type="number" id="distance" step="0.1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                    </div>
                </div>

                <!-- MÃ¼ÅŸteri Bilgileri -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">ğŸ‘¤ MÃ¼ÅŸteri Bilgileri</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ad</label>
                            <input type="text" id="customerName" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Soyad</label>
                            <input type="text" id="customerSurname" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Ä°letiÅŸim NumarasÄ±</label>
                            <input type="tel" id="customerPhone" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium text-gray-700 mb-2">Adres</label>
                            <textarea id="customerAddress" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Teknik Ekip -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">ğŸ‘¥ Teknik Ekip</h2>
                    <div id="teamMembers" class="space-y-3">
                        <div class="flex gap-3">
                            <input type="text" placeholder="Ekip Ã¼yesi adÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <button type="button" onclick="removeTeamMember(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                        </div>
                    </div>
                    <button type="button" onclick="addTeamMember()" class="mt-3 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">+ Ekip Ãœyesi Ekle</button>
                </div>

                <!-- ArÄ±za Bilgileri -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">âš ï¸ ArÄ±za Bilgileri</h2>
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Bildirilen ArÄ±za</label>
                        <textarea id="reportedFault" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="MÃ¼ÅŸteri tarafÄ±ndan bildirilen arÄ±za aÃ§Ä±klamasÄ±..."></textarea>
                    </div>
                    
                    <div class="mb-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tespit Edilen ArÄ±zalar</label>
                        <div id="detectedFaults" class="space-y-3">
                            <div class="flex gap-3">
                                <textarea placeholder="Tespit edilen arÄ±za aÃ§Ä±klamasÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2"></textarea>
                                <button type="button" onclick="removeDetectedFault(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                            </div>
                        </div>
                        <button type="button" onclick="addDetectedFault()" class="mt-3 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">+ ArÄ±za Ekle</button>
                    </div>
                </div>

                <!-- DeÄŸiÅŸtirilen ParÃ§alar -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">ğŸ”§ DeÄŸiÅŸtirilen ParÃ§alar</h2>
                    <div id="replacedParts" class="space-y-3">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                            <input type="text" placeholder="ParÃ§a adÄ±" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <input type="number" placeholder="Adet" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <button type="button" onclick="removeReplacedPart(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                        </div>
                    </div>
                    <button type="button" onclick="addReplacedPart()" class="mt-3 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors">+ ParÃ§a Ekle</button>
                </div>

                <!-- YapÄ±lan Ä°ÅŸlemler -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">ğŸ› ï¸ YapÄ±lan Ä°ÅŸlemler</h2>
                    <div id="performedActions" class="space-y-3">
                        <div class="flex gap-3">
                            <textarea placeholder="YapÄ±lan iÅŸlem aÃ§Ä±klamasÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2"></textarea>
                            <button type="button" onclick="removePerformedAction(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                        </div>
                    </div>
                    <button type="button" onclick="addPerformedAction()" class="mt-3 px-4 py-2 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-colors">+ Ä°ÅŸlem Ekle</button>
                </div>

                <!-- ArÄ±za Giderildi mi? -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">âœ… ArÄ±za Durumu</h2>
                    <div class="space-y-3">
                        <div class="flex items-center space-x-3">
                            <input type="radio" id="faultFixed" name="faultStatus" value="fixed" class="w-4 h-4 text-green-600">
                            <label for="faultFixed" class="text-sm font-medium text-gray-700">ArÄ±za tamamen giderildi</label>
                        </div>
                        <div class="flex items-center space-x-3">
                            <input type="radio" id="faultPartial" name="faultStatus" value="partial" class="w-4 h-4 text-yellow-600">
                            <label for="faultPartial" class="text-sm font-medium text-gray-700">ArÄ±za kÄ±smen giderildi</label>
                        </div>
                        <div class="flex items-center space-x-3">
                            <input type="radio" id="faultNotFixed" name="faultStatus" value="notfixed" class="w-4 h-4 text-red-600">
                            <label for="faultNotFixed" class="text-sm font-medium text-gray-700">ArÄ±za giderilemedi</label>
                        </div>
                    </div>
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-700 mb-2">AÃ§Ä±klama</label>
                        <textarea id="faultStatusDescription" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="ArÄ±za durumu hakkÄ±nda detaylÄ± aÃ§Ä±klama..."></textarea>
                    </div>
                </div>

                <!-- Ä°mzalar -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h2 class="text-xl font-semibold text-gray-800 mb-4 border-b pb-2">âœï¸ Ä°mzalar</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Teslim Eden (Teknisyen)</label>
                            <input type="text" id="technicianName" placeholder="Ad Soyad" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-3">
                            <div class="signature-box" onclick="toggleSignature('technicianSignature')" id="technicianSignature">
                                Ä°mza iÃ§in tÄ±klayÄ±n
                            </div>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Teslim Alan (MÃ¼ÅŸteri)</label>
                            <input type="text" id="customerSignatureName" placeholder="Ad Soyad" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent mb-3">
                            <div class="signature-box" onclick="toggleSignature('customerSignature')" id="customerSignature">
                                Ä°mza iÃ§in tÄ±klayÄ±n
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Butonlar -->
                <div class="flex flex-col sm:flex-row gap-4 justify-center">
                    <button type="button" onclick="saveReport()" class="px-8 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors font-semibold">ğŸ’¾ Kaydet</button>
                    <button type="button" onclick="generateReport()" class="px-8 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-semibold">ğŸ“„ Rapor OluÅŸtur</button>
                    <button type="button" onclick="printReport()" class="px-8 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors font-semibold">ğŸ–¨ï¸ YazdÄ±r</button>
                    <button type="reset" onclick="clearForm()" class="px-8 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-semibold">ğŸ—‘ï¸ Temizle</button>
                </div>
            </form>

            <!-- Rapor Ã–nizleme -->
            <div id="reportPreview" class="hidden bg-white rounded-xl shadow-lg p-8 mt-8">
                <div class="text-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-800">TEKNÄ°K SERVÄ°S RAPORU</h1>
                    <p class="text-gray-600">DÃ¶ner Servis Ã‡alÄ±ÅŸmasÄ±</p>
                    <p class="text-lg font-semibold text-blue-600 mt-2" id="reportServiceNumber"></p>
                </div>
                <div id="reportContent"></div>
            </div>
        </div>

        <!-- KayÄ±tlÄ± Raporlar SayfasÄ± -->
        <div id="reportList" class="page">
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-2xl font-semibold text-gray-800">KayÄ±tlÄ± Servis RaporlarÄ±</h2>
                    <div class="flex gap-3">
                        <input type="text" id="searchInput" placeholder="Servis numarasÄ± veya mÃ¼ÅŸteri adÄ± ile ara..." class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64">
                        <button onclick="searchReports()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">ğŸ” Ara</button>
                    </div>
                </div>
                
                <div id="reportsList" class="space-y-4">
                    <div class="text-center text-gray-500 py-8">
                        <p class="text-lg">HenÃ¼z kayÄ±tlÄ± rapor bulunmuyor.</p>
                        <p class="text-sm mt-2">Ä°lk raporu oluÅŸturmak iÃ§in "Yeni Rapor" sekmesini kullanÄ±n.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Rapor Detay Modal -->
        <div id="reportModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
            <div class="flex items-center justify-center min-h-screen p-4">
                <div class="bg-white rounded-xl shadow-2xl max-w-4xl w-full max-h-screen overflow-y-auto">
                    <div class="p-6">
                        <div class="flex justify-between items-center mb-4">
                            <h2 class="text-2xl font-semibold text-gray-800">Rapor DetayÄ±</h2>
                            <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                        </div>
                        <div id="modalContent"></div>
                        <div class="flex gap-3 mt-6 justify-end">
                            <button onclick="printModalReport()" class="px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">ğŸ–¨ï¸ YazdÄ±r</button>
                            <button onclick="deleteReport()" class="px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">ğŸ—‘ï¸ Sil</button>
                            <button onclick="closeModal()" class="px-6 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors">Kapat</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentServiceNumber = 1;
        let currentReportId = null;

        // Sayfa yÃ¼klendiÄŸinde
        document.addEventListener('DOMContentLoaded', function() {
            loadServiceNumber();
            updateCurrentServiceNumber();
            loadReports();
            
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('serviceDate').value = today;
        });

        function loadServiceNumber() {
            const savedNumber = localStorage.getItem('lastServiceNumber');
            if (savedNumber) {
                currentServiceNumber = parseInt(savedNumber) + 1;
            }
        }

        function updateCurrentServiceNumber() {
            const serviceNumberElement = document.getElementById('currentServiceNumber');
            serviceNumberElement.textContent = SRV-${String(currentServiceNumber).padStart(3, '0')};
        }

        function showPage(pageId) {
            // TÃ¼m sayfalarÄ± gizle
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // TÃ¼m tab butonlarÄ±nÄ± pasif yap
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
                button.classList.add('bg-gray-100', 'hover:bg-gray-200');
            });
            
            // SeÃ§ilen sayfayÄ± gÃ¶ster
            document.getElementById(pageId).classList.add('active');
            
            // SeÃ§ilen tab butonunu aktif yap
            event.target.classList.add('active');
            event.target.classList.remove('bg-gray-100', 'hover:bg-gray-200');
            
            if (pageId === 'reportList') {
                loadReports();
            }
        }

        function saveReport() {
            const serviceNumber = SRV-${String(currentServiceNumber).padStart(3, '0')};
            const reportData = collectFormData();
            reportData.serviceNumber = serviceNumber;
            reportData.createdDate = new Date().toISOString();
            reportData.id = Date.now(); // Unique ID
            
            // LocalStorage'a kaydet
            let savedReports = JSON.parse(localStorage.getItem('serviceReports') || '[]');
            savedReports.push(reportData);
            localStorage.setItem('serviceReports', JSON.stringify(savedReports));
            
            // Servis numarasÄ±nÄ± gÃ¼ncelle
            localStorage.setItem('lastServiceNumber', currentServiceNumber.toString());
            currentServiceNumber++;
            updateCurrentServiceNumber();
            
            // BaÅŸarÄ± mesajÄ±
            alert(Rapor baÅŸarÄ±yla kaydedildi!\nServis NumarasÄ±: ${serviceNumber});
            
            // Formu temizle
            clearForm();
        }

        function collectFormData() {
            const data = {
                date: document.getElementById('serviceDate').value,
                departureTime: document.getElementById('departureTime').value,
                exitTime: document.getElementById('exitTime').value,
                stayDuration: document.getElementById('stayDuration').value,
                distance: document.getElementById('distance').value,
                customerName: document.getElementById('customerName').value,
                customerSurname: document.getElementById('customerSurname').value,
                customerPhone: document.getElementById('customerPhone').value,
                customerAddress: document.getElementById('customerAddress').value,
                reportedFault: document.getElementById('reportedFault').value,
                faultStatusDescription: document.getElementById('faultStatusDescription').value,
                technicianName: document.getElementById('technicianName').value,
                customerSignatureName: document.getElementById('customerSignatureName').value
            };

            // Ekip Ã¼yelerini topla
            data.teamMembers = [];
            document.querySelectorAll('#teamMembers input').forEach(input => {
                if (input.value.trim()) data.teamMembers.push(input.value.trim());
            });

            // Tespit edilen arÄ±zalarÄ± topla
            data.detectedFaults = [];
            document.querySelectorAll('#detectedFaults textarea').forEach(textarea => {
                if (textarea.value.trim()) data.detectedFaults.push(textarea.value.trim());
            });

            // DeÄŸiÅŸtirilen parÃ§alarÄ± topla
            data.replacedParts = [];
            const partRows = document.querySelectorAll('#replacedParts > div');
            partRows.forEach(row => {
                const inputs = row.querySelectorAll('input');
                if (inputs[0].value.trim() && inputs[1].value.trim()) {
                    data.replacedParts.push({
                        name: inputs[0].value.trim(),
                        quantity: inputs[1].value.trim()
                    });
                }
            });

            // YapÄ±lan iÅŸlemleri topla
            data.performedActions = [];
            document.querySelectorAll('#performedActions textarea').forEach(textarea => {
                if (textarea.value.trim()) data.performedActions.push(textarea.value.trim());
            });

            // ArÄ±za durumunu al
            const faultStatus = document.querySelector('input[name="faultStatus"]:checked');
            data.faultStatus = faultStatus ? faultStatus.value : '';

            // Ä°mza durumlarÄ±nÄ± al
            data.technicianSigned = document.getElementById('technicianSignature').classList.contains('signature-filled');
            data.customerSigned = document.getElementById('customerSignature').classList.contains('signature-filled');

            return data;
        }

        function loadReports() {
            const savedReports = JSON.parse(localStorage.getItem('serviceReports') || '[]');
            const reportsList = document.getElementById('reportsList');
            
            if (savedReports.length === 0) {
                reportsList.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <p class="text-lg">HenÃ¼z kayÄ±tlÄ± rapor bulunmuyor.</p>
                        <p class="text-sm mt-2">Ä°lk raporu oluÅŸturmak iÃ§in "Yeni Rapor" sekmesini kullanÄ±n.</p>
                    </div>
                `;
                return;
            }

            // RaporlarÄ± tarihe gÃ¶re sÄ±rala (en yeni Ã¶nce)
            savedReports.sort((a, b) => new Date(b.createdDate) - new Date(a.createdDate));

            let html = '';
            savedReports.forEach(report => {
                const createdDate = new Date(report.createdDate).toLocaleDateString('tr-TR');
                const faultStatusText = report.faultStatus === 'fixed' ? 'Giderildi' : 
                                      report.faultStatus === 'partial' ? 'KÄ±smen Giderildi' : 
                                      report.faultStatus === 'notfixed' ? 'Giderilemedi' : 'Belirtilmedi';
                const statusColor = report.faultStatus === 'fixed' ? 'text-green-600' : 
                                   report.faultStatus === 'partial' ? 'text-yellow-600' : 
                                   report.faultStatus === 'notfixed' ? 'text-red-600' : 'text-gray-600';

                html += `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer" onclick="viewReport(${report.id})">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-4 mb-2">
                                    <h3 class="text-lg font-semibold text-blue-600">${report.serviceNumber}</h3>
                                    <span class="text-sm text-gray-500">${createdDate}</span>
                                    <span class="text-sm font-medium ${statusColor}">${faultStatusText}</span>
                                </div>
                                <p class="text-gray-700 font-medium">${report.customerName} ${report.customerSurname}</p>
                                <p class="text-sm text-gray-600">${report.customerPhone || 'Telefon belirtilmedi'}</p>
                                <p class="text-sm text-gray-600 mt-1">${report.reportedFault || 'ArÄ±za aÃ§Ä±klamasÄ± yok'}</p>
                            </div>
                            <div class="text-right text-sm text-gray-500">
                                <p>Tarih: ${report.date || 'Belirtilmedi'}</p>
                                <p>Mesafe: ${report.distance || '0'} km</p>
                            </div>
                        </div>
                    </div>
                `;
            });

            reportsList.innerHTML = html;
        }

        function searchReports() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const savedReports = JSON.parse(localStorage.getItem('serviceReports') || '[]');
            
            const filteredReports = savedReports.filter(report => 
                report.serviceNumber.toLowerCase().includes(searchTerm) ||
                (report.customerName + ' ' + report.customerSurname).toLowerCase().includes(searchTerm) ||
                report.customerPhone.includes(searchTerm)
            );

            const reportsList = document.getElementById('reportsList');
            
            if (filteredReports.length === 0) {
                reportsList.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <p class="text-lg">Arama kriterinize uygun rapor bulunamadÄ±.</p>
                        <p class="text-sm mt-2">FarklÄ± bir arama terimi deneyin.</p>
                    </div>
                `;
                return;
            }

            // FiltrelenmiÅŸ raporlarÄ± gÃ¶ster
            filteredReports.sort((a, b) => new Date(b.createdDate) - new Date(a.createdDate));

            let html = '';
            filteredReports.forEach(report => {
                const createdDate = new Date(report.createdDate).toLocaleDateString('tr-TR');
                const faultStatusText = report.faultStatus === 'fixed' ? 'Giderildi' : 
                                      report.faultStatus === 'partial' ? 'KÄ±smen Giderildi' : 
                                      report.faultStatus === 'notfixed' ? 'Giderilemedi' : 'Belirtilmedi';
                const statusColor = report.faultStatus === 'fixed' ? 'text-green-600' : 
                                   report.faultStatus === 'partial' ? 'text-yellow-600' : 
                                   report.faultStatus === 'notfixed' ? 'text-red-600' : 'text-gray-600';

                html += `
                    <div class="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer" onclick="viewReport(${report.id})">
                        <div class="flex justify-between items-start">
                            <div class="flex-1">
                                <div class="flex items-center gap-4 mb-2">
                                    <h3 class="text-lg font-semibold text-blue-600">${report.serviceNumber}</h3>
                                    <span class="text-sm text-gray-500">${createdDate}</span>
                                    <span class="text-sm font-medium ${statusColor}">${faultStatusText}</span>
                                </div>
                                <p class="text-gray-700 font-medium">${report.customerName} ${report.customerSurname}</p>
                                <p class="text-sm text-gray-600">${report.customerPhone || 'Telefon belirtilmedi'}</p>
                                <p class="text-sm text-gray-600 mt-1">${report.reportedFault || 'ArÄ±za aÃ§Ä±klamasÄ± yok'}</p>
                            </div>
                            <div class="text-right text-sm text-gray-500">
                                <p>Tarih: ${report.date || 'Belirtilmedi'}</p>
                                <p>Mesafe: ${report.distance || '0'} km</p>
                            </div>
                        </div>
                    </div>
                `;
            });

            reportsList.innerHTML = html;
        }

        function viewReport(reportId) {
            const savedReports = JSON.parse(localStorage.getItem('serviceReports') || '[]');
            const report = savedReports.find(r => r.id === reportId);
            
            if (!report) return;
            
            currentReportId = reportId;
            
            const faultStatusText = report.faultStatus === 'fixed' ? 'Tamamen Giderildi' : 
                                   report.faultStatus === 'partial' ? 'KÄ±smen Giderildi' : 
                                   report.faultStatus === 'notfixed' ? 'Giderilemedi' : 'Belirtilmedi';

            const modalContent = document.getElementById('modalContent');
            modalContent.innerHTML = `
                <div class="text-center mb-6">
                    <h1 class="text-2xl font-bold text-gray-800">TEKNÄ°K SERVÄ°S RAPORU</h1>
                    <p class="text-gray-600">DÃ¶ner Servis Ã‡alÄ±ÅŸmasÄ±</p>
                    <p class="text-lg font-semibold text-blue-600 mt-2">${report.serviceNumber}</p>
                </div>
                
                <div class="space-y-6">
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div><strong>Tarih:</strong> ${report.date || 'Belirtilmedi'}</div>
                        <div><strong>GidiÅŸ Saati:</strong> ${report.departureTime || 'Belirtilmedi'}</div>
                        <div><strong>Ã‡Ä±kÄ±ÅŸ Saati:</strong> ${report.exitTime || 'Belirtilmedi'}</div>
                        <div><strong>Kalma SÃ¼resi:</strong> ${report.stayDuration || 'Belirtilmedi'} saat</div>
                        <div><strong>Mesafe:</strong> ${report.distance || 'Belirtilmedi'} km</div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">MÃ¼ÅŸteri Bilgileri</h3>
                        <div class="text-sm space-y-1">
                            <div><strong>Ad Soyad:</strong> ${report.customerName} ${report.customerSurname}</div>
                            <div><strong>Telefon:</strong> ${report.customerPhone || 'Belirtilmedi'}</div>
                            <div><strong>Adres:</strong> ${report.customerAddress || 'Belirtilmedi'}</div>
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">Teknik Ekip</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${report.teamMembers.map(member => <li>${member}</li>).join('') || '<li>Belirtilmedi</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">Bildirilen ArÄ±za</h3>
                        <p class="text-sm">${report.reportedFault || 'Belirtilmedi'}</p>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">Tespit Edilen ArÄ±zalar</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${report.detectedFaults.map(fault => <li>${fault}</li>).join('') || '<li>Belirtilmedi</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">DeÄŸiÅŸtirilen ParÃ§alar</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${report.replacedParts.map(part => <li>${part.name} - ${part.quantity} adet</li>).join('') || '<li>ParÃ§a deÄŸiÅŸimi yapÄ±lmadÄ±</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">YapÄ±lan Ä°ÅŸlemler</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${report.performedActions.map(action => <li>${action}</li>).join('') || '<li>Belirtilmedi</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">ArÄ±za Durumu</h3>
                        <p class="text-sm"><strong>Durum:</strong> ${faultStatusText}</p>
                        <p class="text-sm mt-2">${report.faultStatusDescription || 'AÃ§Ä±klama belirtilmedi'}</p>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-4">Ä°mzalar</h3>
                        <div class="grid grid-cols-2 gap-8">
                            <div class="text-center">
                                <div class="border-b border-gray-400 pb-2 mb-2 h-16 flex items-end justify-center">
                                    ${report.technicianSigned ? 'âœ“ Ä°mzalandÄ±' : ''}
                                </div>
                                <p class="text-sm font-medium">Teslim Eden</p>
                                <p class="text-sm">${report.technicianName || 'Ad Soyad'}</p>
                            </div>
                            <div class="text-center">
                                <div class="border-b border-gray-400 pb-2 mb-2 h-16 flex items-end justify-center">
                                    ${report.customerSigned ? 'âœ“ Ä°mzalandÄ±' : ''}
                                </div>
                                <p class="text-sm font-medium">Teslim Alan</p>
                                <p class="text-sm">${report.customerSignatureName || 'Ad Soyad'}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('reportModal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('reportModal').classList.add('hidden');
            currentReportId = null;
        }

        function deleteReport() {
            if (!currentReportId) return;
            
            if (confirm('Bu raporu silmek istediÄŸinizden emin misiniz? Bu iÅŸlem geri alÄ±namaz.')) {
                let savedReports = JSON.parse(localStorage.getItem('serviceReports') || '[]');
                savedReports = savedReports.filter(report => report.id !== currentReportId);
                localStorage.setItem('serviceReports', JSON.stringify(savedReports));
                
                closeModal();
                loadReports();
                alert('Rapor baÅŸarÄ±yla silindi.');
            }
        }

        function printModalReport() {
            const modalContent = document.getElementById('modalContent');
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Teknik Servis Raporu</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .text-center { text-align: center; }
                        .font-bold { font-weight: bold; }
                        .border-t { border-top: 1px solid #ccc; }
                        .pt-4 { padding-top: 16px; }
                        .mb-2 { margin-bottom: 8px; }
                        .mb-4 { margin-bottom: 16px; }
                        .space-y-6 > * + * { margin-top: 24px; }
                        .grid { display: grid; }
                        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
                        .gap-4 { gap: 16px; }
                        .gap-8 { gap: 32px; }
                        .text-sm { font-size: 14px; }
                        .list-disc { list-style-type: disc; }
                        .list-inside { list-style-position: inside; }
                        .border-b { border-bottom: 1px solid #999; }
                        .pb-2 { padding-bottom: 8px; }
                        .h-16 { height: 64px; }
                        .flex { display: flex; }
                        .items-end { align-items: flex-end; }
                        .justify-center { justify-content: center; }
                    </style>
                </head>
                <body>
                    ${modalContent.innerHTML}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        // DiÄŸer fonksiyonlar (Ã¶nceki koddan)
        function addTeamMember() {
            const container = document.getElementById('teamMembers');
            const div = document.createElement('div');
            div.className = 'flex gap-3';
            div.innerHTML = `
                <input type="text" placeholder="Ekip Ã¼yesi adÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <button type="button" onclick="removeTeamMember(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
            `;
            container.appendChild(div);
        }

        function removeTeamMember(button) {
            button.parentElement.remove();
        }

        function addDetectedFault() {
            const container = document.getElementById('detectedFaults');
            const div = document.createElement('div');
            div.className = 'flex gap-3';
            div.innerHTML = `
                <textarea placeholder="Tespit edilen arÄ±za aÃ§Ä±klamasÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2"></textarea>
                <button type="button" onclick="removeDetectedFault(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
            `;
            container.appendChild(div);
        }

        function removeDetectedFault(button) {
            button.parentElement.remove();
        }

        function addReplacedPart() {
            const container = document.getElementById('replacedParts');
            const div = document.createElement('div');
            div.className = 'grid grid-cols-1 md:grid-cols-3 gap-3';
            div.innerHTML = `
                <input type="text" placeholder="ParÃ§a adÄ±" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <input type="number" placeholder="Adet" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <button type="button" onclick="removeReplacedPart(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
            `;
            container.appendChild(div);
        }

        function removeReplacedPart(button) {
            button.parentElement.remove();
        }

        function addPerformedAction() {
            const container = document.getElementById('performedActions');
            const div = document.createElement('div');
            div.className = 'flex gap-3';
            div.innerHTML = `
                <textarea placeholder="YapÄ±lan iÅŸlem aÃ§Ä±klamasÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2"></textarea>
                <button type="button" onclick="removePerformedAction(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
            `;
            container.appendChild(div);
        }

        function removePerformedAction(button) {
            button.parentElement.remove();
        }

        function toggleSignature(id) {
            const element = document.getElementById(id);
            if (element.classList.contains('signature-filled')) {
                element.classList.remove('signature-filled');
                element.textContent = 'Ä°mza iÃ§in tÄ±klayÄ±n';
            } else {
                element.classList.add('signature-filled');
                element.textContent = 'âœ“ Ä°mzalandÄ±';
            }
        }

        function generateReport() {
            const reportContent = document.getElementById('reportContent');
            const reportPreview = document.getElementById('reportPreview');
            const reportServiceNumber = document.getElementById('reportServiceNumber');
            
            const serviceNumber = SRV-${String(currentServiceNumber).padStart(3, '0')};
            reportServiceNumber.textContent = serviceNumber;
            
            const data = collectFormData();

            const faultStatusText = data.faultStatus === 'fixed' ? 'Tamamen Giderildi' : 
                                   data.faultStatus === 'partial' ? 'KÄ±smen Giderildi' : 
                                   data.faultStatus === 'notfixed' ? 'Giderilemedi' : 'Belirtilmedi';

            let html = `
                <div class="space-y-6">
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div><strong>Tarih:</strong> ${data.date || 'Belirtilmedi'}</div>
                        <div><strong>GidiÅŸ Saati:</strong> ${data.departureTime || 'Belirtilmedi'}</div>
                        <div><strong>Ã‡Ä±kÄ±ÅŸ Saati:</strong> ${data.exitTime || 'Belirtilmedi'}</div>
                        <div><strong>Kalma SÃ¼resi:</strong> ${data.stayDuration || 'Belirtilmedi'} saat</div>
                        <div><strong>Mesafe:</strong> ${data.distance || 'Belirtilmedi'} km</div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">MÃ¼ÅŸteri Bilgileri</h3>
                        <div class="text-sm space-y-1">
                            <div><strong>Ad Soyad:</strong> ${data.customerName} ${data.customerSurname}</div>
                            <div><strong>Telefon:</strong> ${data.customerPhone || 'Belirtilmedi'}</div>
                            <div><strong>Adres:</strong> ${data.customerAddress || 'Belirtilmedi'}</div>
                        </div>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">Teknik Ekip</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${data.teamMembers.map(member => <li>${member}</li>).join('') || '<li>Belirtilmedi</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">Bildirilen ArÄ±za</h3>
                        <p class="text-sm">${data.reportedFault || 'Belirtilmedi'}</p>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">Tespit Edilen ArÄ±zalar</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${data.detectedFaults.map(fault => <li>${fault}</li>).join('') || '<li>Belirtilmedi</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">DeÄŸiÅŸtirilen ParÃ§alar</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${data.replacedParts.map(part => <li>${part.name} - ${part.quantity} adet</li>).join('') || '<li>ParÃ§a deÄŸiÅŸimi yapÄ±lmadÄ±</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">YapÄ±lan Ä°ÅŸlemler</h3>
                        <ul class="text-sm list-disc list-inside">
                            ${data.performedActions.map(action => <li>${action}</li>).join('') || '<li>Belirtilmedi</li>'}
                        </ul>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-2">ArÄ±za Durumu</h3>
                        <p class="text-sm"><strong>Durum:</strong> ${faultStatusText}</p>
                        <p class="text-sm mt-2">${data.faultStatusDescription || 'AÃ§Ä±klama belirtilmedi'}</p>
                    </div>
                    
                    <div class="border-t pt-4">
                        <h3 class="font-semibold mb-4">Ä°mzalar</h3>
                        <div class="grid grid-cols-2 gap-8">
                            <div class="text-center">
                                <div class="border-b border-gray-400 pb-2 mb-2 h-16 flex items-end justify-center">
                                    ${data.technicianSigned ? 'âœ“ Ä°mzalandÄ±' : ''}
                                </div>
                                <p class="text-sm font-medium">Teslim Eden</p>
                                <p class="text-sm">${data.technicianName || 'Ad Soyad'}</p>
                            </div>
                            <div class="text-center">
                                <div class="border-b border-gray-400 pb-2 mb-2 h-16 flex items-end justify-center">
                                    ${data.customerSigned ? 'âœ“ Ä°mzalandÄ±' : ''}
                                </div>
                                <p class="text-sm font-medium">Teslim Alan</p>
                                <p class="text-sm">${data.customerSignatureName || 'Ad Soyad'}</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            reportContent.innerHTML = html;
            reportPreview.classList.remove('hidden');
            reportPreview.scrollIntoView({ behavior: 'smooth' });
        }

        function printReport() {
            const reportPreview = document.getElementById('reportPreview');
            if (reportPreview.classList.contains('hidden')) {
                alert('Ã–nce rapor oluÅŸturun!');
                return;
            }
            
            const printWindow = window.open('', '_blank');
            printWindow.document.write(`
                <html>
                <head>
                    <title>Teknik Servis Raporu</title>
                    <style>
                        body { font-family: Arial, sans-serif; margin: 20px; }
                        .text-center { text-align: center; }
                        .font-bold { font-weight: bold; }
                        .border-t { border-top: 1px solid #ccc; }
                        .pt-4 { padding-top: 16px; }
                        .mb-2 { margin-bottom: 8px; }
                        .mb-4 { margin-bottom: 16px; }
                        .space-y-6 > * + * { margin-top: 24px; }
                        .grid { display: grid; }
                        .grid-cols-2 { grid-template-columns: repeat(2, 1fr); }
                        .gap-4 { gap: 16px; }
                        .gap-8 { gap: 32px; }
                        .text-sm { font-size: 14px; }
                        .list-disc { list-style-type: disc; }
                        .list-inside { list-style-position: inside; }
                        .border-b { border-bottom: 1px solid #999; }
                        .pb-2 { padding-bottom: 8px; }
                        .h-16 { height: 64px; }
                        .flex { display: flex; }
                        .items-end { align-items: flex-end; }
                        .justify-center { justify-content: center; }
                    </style>
                </head>
                <body>
                    <div class="text-center mb-4">
                        <h1 class="font-bold" style="font-size: 24px;">TEKNÄ°K SERVÄ°S RAPORU</h1>
                        <p>DÃ¶ner Servis Ã‡alÄ±ÅŸmasÄ±</p>
                        <p style="font-size: 18px; font-weight: bold; color: #3b82f6; margin-top: 8px;">${document.getElementById('reportServiceNumber').textContent}</p>
                    </div>
                    ${document.getElementById('reportContent').innerHTML}
                </body>
                </html>
            `);
            printWindow.document.close();
            printWindow.print();
        }

        function clearForm() {
            if (confirm('TÃ¼m verileri silmek istediÄŸinizden emin misiniz?')) {
                document.getElementById('serviceForm').reset();
                document.getElementById('reportPreview').classList.add('hidden');
                
                // Ä°mza kutularÄ±nÄ± sÄ±fÄ±rla
                document.getElementById('technicianSignature').classList.remove('signature-filled');
                document.getElementById('customerSignature').classList.remove('signature-filled');
                document.getElementById('technicianSignature').textContent = 'Ä°mza iÃ§in tÄ±klayÄ±n';
                document.getElementById('customerSignature').textContent = 'Ä°mza iÃ§in tÄ±klayÄ±n';
                
                // Dinamik alanlarÄ± sÄ±fÄ±rla
                document.getElementById('teamMembers').innerHTML = `
                    <div class="flex gap-3">
                        <input type="text" placeholder="Ekip Ã¼yesi adÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <button type="button" onclick="removeTeamMember(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                    </div>
                `;
                
                document.getElementById('detectedFaults').innerHTML = `
                    <div class="flex gap-3">
                        <textarea placeholder="Tespit edilen arÄ±za aÃ§Ä±klamasÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2"></textarea>
                        <button type="button" onclick="removeDetectedFault(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                    </div>
                `;
                
                document.getElementById('replacedParts').innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                        <input type="text" placeholder="ParÃ§a adÄ±" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <input type="number" placeholder="Adet" class="px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                        <button type="button" onclick="removeReplacedPart(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                    </div>
                `;
                
                document.getElementById('performedActions').innerHTML = `
                    <div class="flex gap-3">
                        <textarea placeholder="YapÄ±lan iÅŸlem aÃ§Ä±klamasÄ±" class="flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" rows="2"></textarea>
                        <button type="button" onclick="removePerformedAction(this)" class="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors">Sil</button>
                    </div>
                `;
                
                // BugÃ¼nÃ¼n tarihini tekrar ayarla
                const today = new Date().toISOString().split('T')[0];
                document.getElementById('serviceDate').value = today;
            }
        }
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'962ae0262525694e',t:'MTc1MzEwMjc2Ny4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>